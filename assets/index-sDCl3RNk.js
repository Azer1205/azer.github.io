var ue=Object.defineProperty;var F=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var G=(m,c,i)=>c in m?ue(m,c,{enumerable:!0,configurable:!0,writable:!0,value:i}):m[c]=i,J=(m,c)=>{for(var i in c||(c={}))ce.call(c,i)&&G(m,i,c[i]);if(F)for(var i of F(c))ie.call(c,i)&&G(m,i,c[i]);return m};import{B as Y}from"./Button-Btf5IT0s.js";import{d as de,c as g,j as x,h as O,l as me,o as p,a as _,f as b,F as M,r as N,b as P,m as U,w as C,u as fe,q as ve,k as I,t as D,n as xe,p as he,e as pe,_ as be}from"./index-C2FjaYkJ.js";const ye=["1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_e=m=>(he("data-v-b36618ef"),m=m(),pe(),m),we={class:"game sudoku"},ke={class:"game-modes"},ge={class:"row"},Be=_e(()=>b("div",{class:"row"},null,-1)),Xe={class:"board-wrap"},Se=["onClick"],Ee={class:"footer"},Ye=de({__name:"index",setup(m){const c=g(()=>{const{rows:e,cols:s}=y.value;return e*s}),i=g(()=>ye.slice(0,c.value)),w=g(()=>{const{rows:e,cols:s}=y.value,t=[];for(let o=0;o<s;o++)for(let a=0;a<e;a++){const[u,n]=[s*a,e*o],[r,l]=[u+s,n+e];t.push({minX:u,minY:n,maxX:r,maxY:l})}return t}),K=g(()=>({"--width":h.value*c.value+"px","--height":h.value*c.value+"px","--box-width":h.value+"px","--box-height":h.value+"px"})),d=x([]),h=x(30),T=e=>{const{x:s,y:t}=e,o=H(e);return J({top:h.value*t+"px",left:h.value*s+"px"},o)},B=x(!1),R=[[{label:"3x3简单",rows:3,cols:3,mode:"easy"},{label:"3x3普通",rows:3,cols:3,mode:"normal"},{label:"3x3困难",rows:3,cols:3,mode:"difficult"}],[{label:"3x4简单",rows:3,cols:4,mode:"easy"},{label:"3x4普通",rows:3,cols:4,mode:"normal"},{label:"3x4困难",rows:3,cols:4,mode:"difficult"}],[{label:"4x4简单",rows:4,cols:4,mode:"easy"},{label:"4x4普通",rows:4,cols:4,mode:"normal"},{label:"4x4困难",rows:4,cols:4,mode:"difficult"}]],y=x(R[0][0]),q=()=>{try{B.value=!0,d.value=[];const e=[];for(let s=0;s<c.value;s++)z(s)&&e.push(s);e.length?q():A(),B.value=!1}catch(e){console.log(e),B.value=!1}},z=(e,s=0)=>{if(s>10)return!0;const t=j(e);return t.find(o=>!o.num)?z(e,s+1):(d.value=[...d.value,...t],!1)},j=e=>{let s=[...i.value];const t=[];for(let o=0;o<c.value;o++){const a=Q(s,[o,e]),u=Math.round(Math.random()*(a.length-1)),n=a[u],r=x({id:`${i.value[o]}_${i.value[e]}`,x:o,y:e,num:n,trueNum:n,isError:!1,disabled:!0});t.push(r.value),s=s.filter(l=>l!==n)}return t},A=()=>{const e=c.value,{mode:s}=y.value;let t=1,o=Math.round(e/3);s==="normal"&&(t=Math.round(e/3),o=Math.round(e/2)),s==="difficult"&&(t=Math.round(e/2),o=Math.round(e/4*3)),w.value.forEach(a=>{const{minX:u,minY:n,maxX:r,maxY:l}=a,k=d.value.filter(v=>v.x>=u&&v.x<r&&v.y>=n&&v.y<l),S=Math.round(Math.random()*(o-t)+t),E=[];for(;E.length<S;){const v=Math.round(Math.random()*(e-1));E.includes(v)||(E.push(v),k[v].num="",k[v].disabled=!1)}}),X=JSON.stringify(d.value)},L=()=>{q()};O(L);const H=e=>{const{rows:s,cols:t}=y.value,o={},{x:a,y:u}=e;return o["border-top-color"]=u%s===0?"#000":"#bbb",o["border-right-color"]=a%t===t-1?"#000":"#bbb",o["border-bottom-color"]=u%s===s-1?"#000":"#bbb",o["border-left-color"]=a%t===0?"#000":"#bbb",o},Q=(e,[s,t])=>{const o=W(s),a=Z(s,t);return e.filter(u=>!o.includes(u)&&!a.includes(u))},W=e=>ee(e).map(s=>s.num),Z=(e,s)=>se(e,s).map(t=>t.num),ee=e=>d.value.filter(s=>s.x===e),se=(e,s)=>{const t=w.value.find(r=>r.minX<=e&&r.maxX>e&&r.minY<=s&&r.maxY>s);if(!t)return[];const{minX:o,minY:a,maxX:u,maxY:n}=t;return d.value.filter(r=>r.x>=o&&r.x<u&&r.y>=a&&r.y<n)},te=()=>{if(!f.value)return;d.value.forEach(n=>{n.isError=!1});const{x:e,y:s,num:t,id:o}=f.value,a=w.value.find(n=>n.minX<=e&&n.maxX>e&&n.minY<=s&&n.maxY>s),u=d.value.filter(n=>{if(n.id===o)return!1;if(n.num===t){if(n.x===e||n.y===s)return!0;if(!a)return!1;const{minX:r,minY:l,maxX:k,maxY:S}=a;return n.x>=r&&n.x<k&&n.y>=l&&n.y<S}return!1});u.length&&(f.value.isError=!0,u.forEach(n=>n.isError=!0))},V=()=>{L()},oe=()=>{d.value=JSON.parse(X).map(e=>x(e).value)},ne=e=>{y.value=e,V()},f=x(null),ae=e=>{var r;if(((r=f.value)==null?void 0:r.id)===e.id){f.value=null,le();return}f.value=e;const{x:s,y:t}=e,{minX:o=0,minY:a=0,maxX:u=0,maxY:n=0}=w.value.find(l=>l.minX<=s&&l.maxX>s&&l.minY<=t&&l.maxY>t)||{};d.value.forEach(l=>{l.x===s||l.y===t||l.x>=o&&l.x<u&&l.y>=a&&l.y<n?l.isRelated=!0:l.isRelated=!1})},$=e=>{re(e)};O(()=>{window.addEventListener("keypress",$)}),me(()=>{window.removeEventListener("keypress",$)});const le=()=>{d.value.forEach(e=>{e.isRelated=!1})},re=e=>{const s=e.key.toUpperCase();i.value.includes(s)&&(!f.value||f.value.disabled||(f.value.num=s,te()))};let X="";return(e,s)=>(p(),_("div",we,[b("div",ke,[(p(),_(M,null,N(R,t=>b("div",ge,[(p(!0),_(M,null,N(t,o=>(p(),ve(Y,{type:"text",size:"small",onClick:a=>ne(o)},{default:C(()=>[I(D(o.label),1)]),_:2},1032,["onClick"]))),256))])),64)),Be]),b("div",Xe,[b("div",{class:"board",style:P(K.value)},[(p(!0),_(M,null,N(d.value,t=>{var o;return p(),_("div",{class:xe(["box",{"is-current":t.id===((o=f.value)==null?void 0:o.id),"is-related":t.isRelated,"is-error":t.isError,"is-locked":t.disabled}]),style:P(T(t)),onClick:a=>ae(t)},D(t.num),15,Se)}),256))],4)]),b("div",Ee,[U(Y,{size:"small",onClick:V},{default:C(()=>[I("新游戏")]),_:1}),U(Y,{size:"small",onClick:oe,disabled:!fe(X).length},{default:C(()=>[I(" 重置 ")]),_:1},8,["disabled"])])]))}}),Ie=be(Ye,[["__scopeId","data-v-b36618ef"]]);export{Ie as default};
