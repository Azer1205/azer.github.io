import{d as H,r,g as u,f as z,o as d,c as v,a as f,t as g,F as W,b as q,e as C,n as D,_ as I}from"./index-Bq-s6yE7.js";const L={class:"game destroy-stars"},N={class:"score"},V={class:"score selected"},j=["onClick"],A=H({__name:"destroy",setup(G){const p=["#fdc700","#ff0046","#0091ff","#019501"],_=r(16),y=r(10),E=u(()=>({width:`${y.value*i.value}px`,height:`${_.value*h.value}px`,"--starWidth":`${i.value}px`,"--starHeight":`${h.value}px`})),i=r(20),h=r(20),b=t=>{const{color:e,y:o,x:s}=t;return{width:`${i.value}px`,height:`${h.value}px`,background:`${e}`,left:`${s*i.value}px`,bottom:`${o*h.value}px`}},l=r([]);z(()=>{for(let t=0;t<_.value;t++)for(let e=0;e<y.value;e++){const o=`${t}_${e}`,s=p[Math.round(Math.random()*(p.length-1))],a=r({id:o,color:s,y:t,x:e,highlight:!1});l.value.push(a.value)}});const M=t=>{if(t.highlight){if(c.value<2)return;w(),l.value=l.value.filter(e=>!e.highlight),B()}else $(),S(t),c.value<2&&$()},x=r(0),w=()=>{x.value+=m.value},c=u(()=>l.value.filter(t=>t.highlight).length),m=u(()=>{if(c.value<2)return 0;let t=0;for(let e=0;e<c.value;e++)t+=Math.pow(1.2,e)*1e4;return Math.round(t)}),$=()=>{l.value.forEach(t=>t.highlight=!1)},S=t=>{t.highlight=!0;const{y:e,x:o,color:s}=t;[[o-1,e],[o+1,e],[o,e-1],[o,e+1]].forEach(([a,F])=>{const n=l.value.find(k=>k.x===a&&k.y===F);if(n){if(n.highlight)return;n.color===s&&(n.highlight=!0,S(n))}})},B=()=>{const t=[];l.value.forEach(e=>{const{x:o}=e;t[o]||(t[o]=[]),t[o].push(e)}),t.filter(e=>!!e).forEach((e,o)=>{e.sort((s,a)=>s.y-a.y),e.forEach((s,a)=>{s.y=a,s.x=o})})};return(t,e)=>(d(),v("div",L,[f("div",N,g(x.value),1),f("div",V," 选中个数："+g(c.value)+"，分数："+g(m.value),1),f("div",{class:"board",style:C(E.value)},[(d(!0),v(W,null,q(l.value,o=>(d(),v("div",{class:D(["star",{highlight:o.highlight}]),key:o.id,style:C(b(o)),onClick:s=>M(o)},null,14,j))),128))],4)]))}}),O=I(A,[["__scopeId","data-v-d951fc4f"]]);export{O as default};
